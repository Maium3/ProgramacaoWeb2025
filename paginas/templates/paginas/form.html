{% extends "paginas/index.html" %}




{% load static %}

<!--importar o cryspy forms-->
{% load crispy_forms_tags %}
{% block conteudo %}

<h4>{{titulo}}</h4>

<div class="row justify-content-center text-center">

    <div class="col-lg-6">
        <h3>{{titulo}}</h3>

        <p class="texto-info">
            <span>* Campos obrigatórios</span>
        </p>
        <form action="" method="POST" id="form-crud">
            {% csrf_token %}

            <!--usa o crispy para formatar o form-->
            {{ form|crispy }}

            {% if botao == "Excluir" %}
            <h4>Deseja excluir o registro?
                <span style="text-danger">
                    {{object}}
                </span>
            </h4>
            <!--onde devo criar um botão de editar e outro de excluir?-->
            <!--o botão de editar e excluir deve ser criado na página de detalhes do usuário, não aqui no formulário-->
            <!--esse formulário é usado para criar e editar usuários, então só precisamos de um botão de submit-->
            <!--o texto do botão é dinâmico, dependendo se estamos criando ou editando um usuário-->
            <!--se estivermos criando um usuário, o texto do botão será "Salvar"-->
            <!--esse é um formulario base para os outros formularios, por que não posso criar esses botões aqui?-->
            <!--porque o botão de editar e excluir só faz sentido na página de detalhes do usuário-->
            <!--e essa página de detalhes do usuário não usa esse formulário, ela tem seu próprio template-->
            <!--então, para manter a simplicidade e a reutilização do código, não colocamos esses botões aqui-->
            <!--se eu quiser colocar esses botões aqui, como eu faço?-->  
            {% endif %}

            <div class="text-center" >
                <button type="submit" class="btn btn-success">
                    {{botao}}
                </button>
                <!--link para voltar o histórico de navegação-->

                <a href="javascript:history.back()" class="btn btn-outline-primary btn-lg m-2">
                    <i class="bi bi arrow-left-circle" ></i>
                    Voltar
                </a>
                
                <!--botão de criar um Usuarios usando a path registrar-->
                {% comment %} <a href="{% url 'registrar' %}" class="btn btn-outline-primary btn-lg m-2">
                    <i class="bi bi-person-plus"></i>
                    Criar Usuário
                </a> {% endcomment %}
                

            </div>

            

        </form>

    </div>
</div>
{% endblock conteudo %}


{% block scripts %}
<script>
$(document).ready(function(){
    // percorre os campos <select> do <form> e se tiver somente 1 option, seleciona ela 
    $('#form-crud select').each(function(){
        if($(this).find('option').length == 2){
            $(this).prop('selectedIndex', 1);
        }
    });
});
</script>
{% endblock scripts %}